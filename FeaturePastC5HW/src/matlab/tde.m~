clc;clear all;close all;
fs = 1000;T = 1/fs;N = 1000;% 采样率、时间间隔、采样点数
t = (0:N-1)*T;
f0 = 10;                    % 信号频率
delaynum = 20;              % 延时点数
x = sin(2*pi*f0*t);
y1 = x(1:length(x)-100);
y2 = x(delaynum+1:length(x)-100 + delaynum); %延时，截取相同长度信号



[delay,lags] = xcorr(y1,y2,'coeff');
figure(1)
plot(y1);
hold on
plot(y2,'r');
figure(2)
plot(lags/fs,delay)
hold on
Cdnum  = lags(find(delay==max(delay)));
plot([Cdnum/fs,Cdnum/fs],ylim,'r')
text(Cdnum/fs,-0.8,[num2str(Cdnum/fs),'s'])